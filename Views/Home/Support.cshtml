@{
    ViewData["Title"] = "Support";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container my-5">
    <h1 class="text-center mb-5" style="color: #314401; font-weight: bold;">Support Center</h1>

    <!-- Contact Form -->
    <div class="row mb-5">
        <div class="col-12">
            <h3 class="mb-4" style="color: #314401;">Get in Touch</h3>
            <form id="supportForm" novalidate>
                <div class="mb-3">
                    <label for="name" class="form-label" style="color: #333;">Name</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Enter your name" pattern="[A-Za-z\s]+" title="Name can only contain letters and spaces" required>
                    <div class="invalid-feedback">Please enter a valid name (letters and spaces only).</div>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label" style="color: #333;">Email</label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" required>
                    <div class="invalid-feedback">Please enter a valid email address.</div>
                </div>
                <div class="mb-3">
                    <label for="message" class="form-label" style="color: #333;">Message</label>
                    <textarea class="form-control" id="message" name="message" rows="5" placeholder="Tell us how we can help" required></textarea>
                    <div class="invalid-feedback">Please enter your message.</div>
                </div>
                <button type="submit" class="btn rounded-pill py-2" style="background-color: #6D7B30; color: white; width: 200px;">Send Message</button>
            </form>
        </div>
    </div>

    <!-- Contact Info -->
    <div class="row mb-5">
        <div class="col-12 text-center" style="background-color: #F5F5F5; padding: 30px; border-radius: 10px;">
            <h3 class="mb-4" style="color: #314401;">Contact Us</h3>
            <p style="color: #333; font-size: 1.1rem;">
                <i class="bi bi-telephone-fill me-2"></i> +84 123 456 789
            </p>
            <p style="color: #333; font-size: 1.1rem;">
                <i class="bi bi-envelope-fill me-2"></i> organicgrocery@gmail.com
            </p>
            <p style="color: #333; font-size: 1.1rem;">
                <i class="bi bi-clock-fill me-2"></i> 6:00 AM - 12:00 PM
            </p>
            <p style="color: #333; font-size: 1.1rem;">
                <i class="bi bi-geo-alt-fill me-2"></i> 54 Nguyễn Lương Bằng
            </p>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="row">
        <div class="col-12">
            <h3 class="mb-4 text-center" style="color: #314401;">Frequently Asked Questions</h3>
            <div class="accordion" id="faqAccordion">
                <!-- FAQs will be dynamically added via JavaScript -->
            </div>
        </div>
    </div>
</div>

<style>
    .form-control:focus, .form-select:focus {
        border-color: #6D7B30;
        box-shadow: 0 0 5px rgba(109, 123, 48, 0.3);
    }

    .invalid-feedback {
        display: none;
    }

    .was-validated .form-control:invalid {
        border-color: #dc3545;
    }

        .was-validated .form-control:invalid ~ .invalid-feedback {
            display: block;
        }

    .accordion-button:not(.collapsed) {
        background-color: #E8F0D7;
        color: #314401;
    }

    .accordion-button:focus {
        box-shadow: none;
        border-color: #6D7B30;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Contact Form Submission
        const form = document.getElementById('supportForm');
        form.addEventListener('submit', function (e) {
            e.preventDefault();
            let isValid = true;

            // Apply Bootstrap validation styles
            form.classList.add('was-validated');

            // Check form validity
            if (form.checkValidity()) {
                Swal.fire({
                    icon: 'success',
                    title: 'Message Sent!',
                    text: 'Thank you for contacting us. We will get back to you soon.',
                    confirmButtonColor: '#6D7B30'
                });
                form.reset();
                form.classList.remove('was-validated');
            }
        });

        // Dynamically Add FAQs
        const faqAccordion = document.getElementById('faqAccordion');
        const faqs = [
            {
                id: 'faq1',
                question: 'How do I track my order?',
                answer: 'You can track your order by visiting the <a href="/Order">Order</a> page and entering your order ID. We’ll also send updates via email.',
                isOpen: true
            },
            {
                id: 'faq2',
                question: 'What is your return policy?',
                answer: 'We accept returns within 7 days for perishable items if they are defective. Contact us at organicgrocery@gmail.com for assistance.',
                isOpen: false
            },
            {
                id: 'faq3',
                question: 'Do you offer discounts for bulk orders?',
                answer: 'Yes, we offer discounts for bulk orders. Please reach out to our support team for a custom quote.',
                isOpen: false
            },
            {
                id: 'faq4',
                question: 'How long does delivery take?',
                answer: 'Delivery typically takes 1-3 business days, depending on your location. You’ll receive a tracking link once your order ships.',
                isOpen: false
            },
            {
                id: 'faq5',
                question: 'Are your products certified organic?',
                answer: 'Yes, our products are sourced from certified organic farms, ensuring no harmful chemicals or pesticides are used.',
                isOpen: false
            },
            {
                id: 'faq6',
                question: 'What payment methods do you accept?',
                answer: 'We accept credit/debit cards, mobile payments, and cash on delivery for your convenience.',
                isOpen: false
            }
        ];

        faqs.forEach(faq => {
            const accordionItem = document.createElement('div');
            accordionItem.className = 'accordion-item';
            accordionItem.style.border = '1px solid #6D7B30';

            const header = document.createElement('h2');
            header.className = 'accordion-header';

            const button = document.createElement('button');
            button.className = `accordion-button ${faq.isOpen ? '' : 'collapsed'}`;
            button.type = 'button';
            button.style.backgroundColor = '#F5F5F5';
            button.style.color = '#333';
            button.setAttribute('data-bs-toggle', 'collapse');
            button.setAttribute('data-bs-target', `#${faq.id}`);
            button.textContent = faq.question;

            const collapse = document.createElement('div');
            collapse.id = faq.id;
            collapse.className = `accordion-collapse collapse ${faq.isOpen ? 'show' : ''}`;
            collapse.setAttribute('data-bs-parent', '#faqAccordion');

            const body = document.createElement('div');
            body.className = 'accordion-body';
            body.style.color = '#333';
            body.innerHTML = faq.answer;

            header.appendChild(button);
            collapse.appendChild(body);
            accordionItem.appendChild(header);
            accordionItem.appendChild(collapse);
            faqAccordion.appendChild(accordionItem);
        });
    });
</script>